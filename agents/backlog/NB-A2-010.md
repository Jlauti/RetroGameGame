# NB-A2-010 - Nebula Visual Overhaul (Straight Scroll + Close Chase Camera + True Neon Hex Topography)

## Metadata

- Ticket ID: NB-A2-010
- Owner Agent: agent2
- Status: TODO
- Execution Lane: LOCAL
- Critical Path: YES
- Jules Eligible: NO
- Fallback Owner: agent2
- Retry Count: 0
- Session Health: HEALTHY
- Work Category: ENGINE_INTEGRATION
- Start Date: 2026-02-25

## Objective

Execute a single-threaded runtime overhaul for Nebula Bouncer visuals so gameplay reads clearly and matches the intended "neon hex 2.5D chase view" direction.

Required outcomes:
- scrolling reads as straight forward movement (no diagonal drift perception)
- camera is closer to the ship and ground plane
- ground reads as actual hex topography (not rectangular neon bands)
- topography has gentle dips/mounds (no steep cliffs)
- final look presents clear multi-color neon hex language with preserved gameplay readability

## Waterfall Plan (Single Agent)

### Phase 0 - Baseline and Safety

1. Capture current baseline screenshots at 16:9 (`1920x1080`) from a fresh run.
2. Record current camera constants, scroll axis behavior, and topography material settings.
3. Create a local safety checkpoint commit before refactor-level changes.

### Phase 1 - Scroll Direction Lock (Forward Only)

1. Confirm chunk motion and spawn progression are aligned to one canonical forward axis.
2. Remove/avoid any residual camera yaw or transform choices that visually reintroduce diagonal drift.
3. Validate forward movement by observing a fixed world marker over continuous scroll.

Primary code targets:
- `src/eras/era_future/nebula_bouncer/systems.rs` (`setup_nebula_bouncer`, `update_level_scrolling`, `spawn_next_chunk`)

### Phase 2 - Camera Reframe (Closer Behind-Ship View)

1. Tune chase camera distance, target offset, and orthographic viewport height to feel closer to ship and floor.
2. Preserve cursor-to-world aiming correctness after camera change.
3. Keep player framed near lower-third while preserving obstacle lookahead.

Primary code targets:
- `src/eras/era_future/nebula_bouncer/systems.rs` (camera constants/transform in `setup_nebula_bouncer`)

### Phase 3 - True Hex Topography Surface

1. Replace "rectangular band" look with clearly hexagonal footprint rendering.
2. Ensure each topography cell renders as a readable hex tile silhouette.
3. Keep deterministic data path from procgen tier data intact.

Primary code targets:
- `src/eras/era_future/nebula_bouncer/topography.rs` (`spawn_chunk_topography`, tier visual mapping)
- `src/eras/era_future/nebula_bouncer/resources.rs` (shared mesh/material handles if needed)

### Phase 4 - Gentle Dips/Mounds (Topography Relief)

1. Apply low-amplitude, smoothed elevation variation across neighboring hexes.
2. Preserve gentle relief; no steep occluding spikes.
3. Ensure ship/projectile readability is not blocked by terrain depth layering.

Primary code targets:
- `src/eras/era_future/nebula_bouncer/topography.rs` (height smoothing and placement)
- `src/eras/era_future/nebula_bouncer/procgen.rs` (only if data-shape adjustments are needed; keep determinism)

### Phase 5 - Neon Color Overhaul and Readability Pass

1. Establish a cohesive multi-color neon palette across tiers (at least 4 discernible tier tones).
2. Balance fill/edge intensity so terrain supports gameplay instead of dominating it.
3. Preserve player/enemy/projectile focal hierarchy.

Primary code targets:
- `src/eras/era_future/nebula_bouncer/topography.rs` (`TIER_COLORS`, material assignment)
- `src/eras/era_future/nebula_bouncer/systems.rs` (light/material setup)

### Phase 6 - Verification, Documentation, and Checkpoint Commit

1. Run command gates.
2. Capture before/after screenshots at 16:9.
3. Document constants changed, tradeoffs, and known follow-ups.
4. Create final commit for this standalone overhaul.

## Allowed Paths

- `src/eras/era_future/nebula_bouncer/`
- `specs/nebula_bouncer.md`
- `docs/architecture/DESIGN.md`
- `agents/deliverables/agent2/`
- `agents/reports/agent2/`
- `agents/backlog/NB-A2-010.md`

## Out of Scope

- No non-Nebula era changes.
- No new gameplay mechanics unrelated to camera/scroll/topography presentation.
- No replacement of human-authored ship models.
- No menu/settings work.

## Acceptance Commands

- `cargo build --bin retro-game-game`
- `cargo test --lib nebula_bouncer`
- `cargo fmt -- --check`

## Dependencies

- NB-A1-006 (camera/topography contract baseline)
- NB-A3-003 (deterministic topography data layer)
- NB-A4-011 (neon hex readability guidance)
- NB-A2-009 hotfix context and regressions

## Definition of Done

- Scroll direction reads as forward-only in gameplay (no diagonal drift perception).
- Camera is noticeably closer to ship/ground while gameplay readability remains stable.
- Terrain clearly renders as hex topography with gentle relief (dips/mounds), not rectangular bands.
- Neon tier colors are distinct and readable without obscuring ship/projectiles.
- Deterministic chunk/topography behavior remains intact.
- Deliverable written to `agents/deliverables/agent2/NB-A2-010_visual_overhaul_notes.md`.
- Task report written to `agents/reports/agent2/NB-A2-010_task_report.md`.
