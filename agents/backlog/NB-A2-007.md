# NB-A2-007 - Settings Panel Runtime Integration (Hub + In-Game)

## Metadata

- Ticket ID: NB-A2-007
- Owner Agent: agent2
- Status: TODO
- Execution Lane: LOCAL
- Critical Path: YES
- Jules Eligible: NO
- Fallback Owner: agent2
- Retry Count: 0
- Session Health: HEALTHY
- Work Category: ENGINE_INTEGRATION
- Start Date: 2026-02-25

## Objective

Implement runtime settings UI and wiring so players can change graphics/audio options and quit safely from both menu and gameplay contexts.

Required behavior:
- Add a Settings entry point in the main carousel/hub menu flow.
- Pressing `Esc` while in-game opens settings overlay/panel.
- Panel supports:
  - resolution selection
  - fullscreen mode selection with windowed fullscreen and fullscreen options
  - quit option
- Respect UX/data contract from NB-A1-005.

## Allowed Paths

- src/ui/
- src/core/
- src/main.rs
- specs/nebula_bouncer.md
- docs/architecture/DESIGN.md
- agents/deliverables/agent2/
- agents/reports/agent2/
- agents/backlog/NB-A2-007.md

## Out of Scope

- No era gameplay balance changes.
- No model/sprite creation work.
- No QA artifact writing.

## Acceptance Commands

- cargo build --bin retro-game-game
- cargo test --lib nebula_bouncer
- cargo fmt -- --check

## Dependencies

- NB-A1-005 settings contract completed.
- NB-A4-010 settings visual/layout baseline completed.

## Definition of Done

- Settings panel can be opened from menu flow and from active gameplay via `Esc`.
- Menu/carousel has discoverable Settings entry that transitions to panel.
- In-game settings panel supports close/resume flow without breaking active state.
- Resolution changes apply to the primary window and degrade gracefully when unsupported.
- Display mode selection applies correctly for:
  - windowed
  - borderless/windowed-fullscreen
  - fullscreen
- Quit option is functional and reachable from settings panel.
- Settings persistence scaffold is implemented per contract (load/save defaults + fallback).
- Deliverable written to `agents/deliverables/agent2/NB-A2-007_settings_runtime_notes.md`.
- Task report written to `agents/reports/agent2/NB-A2-007_task_report.md`.
